function CustomerModel(b){if(!b){b={}}var a=this;a.id=b.id;a.name=b.name;a.status=b.status}function CustomerPageModel(c){if(!c){c={}}var a=this;a.customers=ExtractModels(a,c.customers,CustomerModel);var b=[{Type:"text",Name:"Name",Value:ko.observable(""),RecordValue:function(e){return e.name}},{Type:"select",Name:"Status",Options:[GetOption("All","All",null),GetOption("None","None","None"),GetOption("New","New","New"),GetOption("Recently Modified","Recently Modified","Recently Modified")],CurrentOption:ko.observable(),RecordValue:function(e){return e.status}}];var d=[{Name:"ID",Value:"ID",Sort:function(f,e){return f.id<e.id}},{Name:"Name",Value:"Name",Sort:function(f,e){return CompareCaseInsensitive(f.name,e.name)}},{Name:"Status",Value:"Status",Sort:function(f,e){return CompareCaseInsensitive(f.status,e.status)}}];a.filter=new FilterModel(b,a.customers);a.sorter=new SorterModel(d,a.filter.filteredRecords);a.pager=new PagerModel(a.sorter.orderedRecords)}function PagerModel(b){var a=this;a.pageSizeOptions=ko.observableArray([1,5,25,50,100,250,500]);a.records=GetObservableArray(b);a.currentPageIndex=ko.observable(a.records().length>0?0:-1);a.currentPageSize=ko.observable(25);a.recordCount=ko.computed(function(){return a.records().length});a.maxPageIndex=ko.computed(function(){return Math.ceil(a.records().length/a.currentPageSize())-1});a.currentPageRecords=ko.computed(function(){var f=-1;var d=a.currentPageIndex();var c=a.maxPageIndex();if(d>c){f=c}else{if(d==-1){if(c>-1){f=0}else{f=-2}}else{f=d}}if(f!=d){if(f>=-1){a.currentPageIndex(f)}return[]}var e=a.currentPageSize();var h=d*e;var g=h+e;return a.records().slice(h,g)}).extend({throttle:5});a.moveFirst=function(){a.changePageIndex(0)};a.movePrevious=function(){a.changePageIndex(a.currentPageIndex()-1)};a.moveNext=function(){a.changePageIndex(a.currentPageIndex()+1)};a.moveLast=function(){a.changePageIndex(a.maxPageIndex())};a.changePageIndex=function(c){if(c<0||c==a.currentPageIndex()||c>a.maxPageIndex()){return}a.currentPageIndex(c)};a.onPageSizeChange=function(){a.currentPageIndex(0)};a.renderPagers=function(){var c='<div><a href="#" data-bind="click: pager.moveFirst, enable: pager.currentPageIndex() > 0">&lt;&lt;</a><a href="#" data-bind="click: pager.movePrevious, enable: pager.currentPageIndex() > 0">&lt;</a>Page <span data-bind="text: pager.currentPageIndex() + 1"></span> of <span data-bind="text: pager.maxPageIndex() + 1"></span> [<span data-bind="text: pager.recordCount"></span> Record(s)]<select data-bind="options: pager.pageSizeOptions, value: pager.currentPageSize, event: { change: pager.onPageSizeChange }"></select><a href="#" data-bind="click: pager.moveNext, enable: pager.currentPageIndex() < pager.maxPageIndex()">&gt;</a><a href="#" data-bind="click: pager.moveLast, enable: pager.currentPageIndex() < pager.maxPageIndex()">&gt;&gt;</a></div>';$("div.Pager").html(c)};a.renderNoRecords=function(){var c='<span data-bind="visible: pager.recordCount() == 0">No records found.</span>';$("div.NoRecords").html(c)};a.renderPagers();a.renderNoRecords()}function SorterModel(c,b){var a=this;a.records=GetObservableArray(b);a.sortOptions=ko.observableArray(c);a.sortDirections=ko.observableArray([{Name:"Asc",Value:"Asc",Sort:false},{Name:"Desc",Value:"Desc",Sort:true}]);a.currentSortOption=ko.observable(a.sortOptions()[0]);a.currentSortDirection=ko.observable(a.sortDirections()[0]);a.orderedRecords=ko.computed(function(){var d=a.records();var g=a.currentSortOption();var f=a.currentSortDirection();if(g==null||f==null){return d}var e=d.slice(0,d.length);SortArray(e,f.Sort,g.Sort);return e}).extend({throttle:5})}function FilterModel(c,b){var a=this;a.records=GetObservableArray(b);a.filters=ko.observableArray(c);a.activeFilters=ko.computed(function(){var g=a.filters();var j=[];for(var d=0;d<g.length;d++){var e=g[d];if(e.CurrentOption){var h=e.CurrentOption();if(h&&h.FilterValue!=null){var f={Filter:e,IsFiltered:function(l,k){var n=l.CurrentOption();if(!n){return}var m=l.RecordValue(k);return m!=n.FilterValue;NoMat}};j.push(f)}}else{if(e.Value){var i=e.Value();if(i&&i!=""){var f={Filter:e,IsFiltered:function(l,k){var n=l.Value();n=n.toUpperCase();var m=l.RecordValue(k);m=m.toUpperCase();return m.indexOf(n)==-1}};j.push(f)}}}}return j});a.filteredRecords=ko.computed(function(){var g=a.records();var f=a.activeFilters();if(f.length==0){return g}var k=[];for(var h=0;h<g.length;h++){var e=true;var j=g[h];for(var l=0;l<f.length;l++){var d=f[l];var i=d.IsFiltered(d.Filter,j);if(i){e=false;break}}if(e){k.push(j)}}return k}).extend({throttle:200})}function ExtractModels(d,e,c){var g=[];if(e==null){return g}for(var b=0;b<e.length;b++){var f=e[b];var a=new c(f,d);g.push(a)}return g}function GetObservableArray(a){if(typeof(a)=="function"){return a}return ko.observableArray(a)}function CompareCaseInsensitive(b,a){if(b==null){return a==null}else{if(a==null){return false}}return b.toUpperCase()<=a.toUpperCase()}function GetOption(a,c,d){var b={Name:a,Value:c,FilterValue:d};return b}function SortArray(h,e,d){if(h==null){return[]}for(var g=0;g<h.length;g++){var f=h[g];for(var b=g+1;b<h.length;b++){var c=h[b];var a=d(f,c);if(a==e){h[b]=f;h[g]=c;f=c}}}return h}var testCustomers=[{id:1,name:"Test 1",status:"None"},{id:2,name:"Another Customer",status:"Recently Modified"},{id:3,name:"Third Largest",status:"New"},{id:4,name:"Fourth in Line",status:"New"},{id:5,name:"5 for 5",status:"None"},{id:6,name:"Six",status:"New"},{id:7,name:"Serpent",status:"Recently Modified"}];var testData={customers:testCustomers};ko.applyBindings(new CustomerPageModel(testData));