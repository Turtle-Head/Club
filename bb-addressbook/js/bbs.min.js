(function(f){Backbone.sync=function(j,h,i,g){i()};var c=Backbone.Model.extend({defaults:{part1:"hello",part2:"world"}});var d=Backbone.Collection.extend({model:c});var e=Backbone.View.extend({tagName:"li",events:{"click span.swap":"swap","click span.delete":"remove"},initialize:function(){_.bindAll(this,"render","unrender","swap","remove");this.model.bind("change",this.render);this.model.bind("remove",this.unrender)},render:function(){f(this.el).html('<span style="color:black;">'+this.model.get("part1")+" "+this.model.get("part2")+'</span> &nbsp; &nbsp; <span class="swap" style="font-family:sans-serif; color:blue; cursor:pointer;">[swap]</span> <span class="delete" style="cursor:pointer; color:red; font-family:sans-serif;">[delete]</span>');return this},unrender:function(){f(this.el).remove()},swap:function(){var g={part1:this.model.get("part2"),part2:this.model.get("part1")};this.model.set(g)},remove:function(){this.model.destroy()}});var b=Backbone.View.extend({el:f("body"),events:{"click button#add":"addItem"},initialize:function(){_.bindAll(this,"render","addItem","appendItem");this.collection=new d();this.collection.bind("add",this.appendItem);this.counter=0;this.render()},render:function(){var g=this;f(this.el).append("<button id='add'>Add list item</button>");f(this.el).append("<ul></ul>");_(this.collection.models).each(function(h){g.appendItem(h)},this)},addItem:function(){this.counter++;var g=new c();g.set({part2:g.get("part2")+this.counter});this.collection.add(g)},appendItem:function(h){var g=new e({model:h});f("ul",this.el).append(g.render().el)}});var a=new b()})(jQuery);